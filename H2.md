# Package-File-Service

Tehtävänanto h2 Package-File-Service: https://terokarvinen.com/2022/palvelinten-hallinta-2022p2/?from=MoodleNews#h2-package-file-service.

## Tiivistelmät

### Saltin pikaopas

Saltin avulla voidaan hallita jopa tuhansia tietokoneita. Riittää että herralla on julkinen osoite, orjat voivat puolestaan missä vain. Herralle asennetaan 
pakettienhallinan kautta paketti salt-master ja orjalle vastaavasti salt-minion. Orja lisää minion-tiedostoonsa herran osoitteen ja mahdollisesti oman id-tunnuksensa.
Minionin uudelleenkäynnistyksen jälkeen herra näkee avainluettelossaan tämän uuden orjan hyväksymättömissä avaimissa. Sen hyväksyttyään orja on asennettu. `$ sudo salt 
'*' cmd.run 'whoami'` voidaan tarkistaa että asennettu orja vastaa ja asennus onnistui. `$ sudo salt '*'`-alkuisilla komennoilla saadaan ohjattua orjia. (Karvinen 2018.)

### Saltin perusteet

Saltin avulla herran antamat komennot menevät orjille samanaikaisesti. Saatuaan komennon, orja määrittää koskeeko komennolle asetetut ominaisuudet sitä ja tarvittaessa
toteuttaa siinä annetut toiminnot ehtoineen. Tarvittavat komennot ovat jo orjalla paikallisesti, joten komento voidaan nopeasti suorittaa ja palauttaa tulokset herralle. Komennot annetaan muodossa `$ sudo salt '*' pkg.install apache2`. Saltin jälkeen tähtimerkki on kohde, jolle komento osoitetaan. Tähti tarkoittaa kaikkia orjia, mutta komento voidaan myös osoittaa yksittäiselle orjalle tai ryhmälle. Kohdennukseen voidaan käyttää orjan ID:tä yksin tai luetteloituna, orjien käyttöjärjestelmää tai niistä tehtyä yhdistelmää. Pkg.install on funktio, joka halutaan suorittaa eli tässä tapauksessa asennetaan paketti. Viimeisenä on argumentti/muuttuja funktioon liittyen ja tässä kerrotaan asennettavan paketin nimi. 

Tilojen avulla voidaan hallita orjia nopeasti ja tehokkaasti. Saltiin tehdään sls-päättyinen tiedosto, jossa määritellään käytettävät funktiot ja niille vietävät argumentit. Sinne voidaan myös määrittää demonin uudelleenkäynnistys tietyn ehdon toteutuessa. Tilat voidaan ajaa kaikille orjille apply-komennon avulla, jolloin tehdään muutoksia mikäli niitä on tullut. Mikäli orja oli jo oikeassa tilassa, tulee ilmoitus että muutoksia ei tehty.

## Demonin asetukset package-file-service -rakenteella


# Tehtävä on kesken ja päivittyy edistyessään
